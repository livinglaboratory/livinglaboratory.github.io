<!DOCTYPE html>
<html class="no-js" lang="en" dir="ltr">
	<head>
		<meta charset="utf-8" />
		<meta http-equiv="x-ua-compatible" content="ie=edge" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<title>Foundation for Sites</title>
		<link rel="stylesheet" href="css/foundation.css" />
		<link rel="stylesheet" href="css/app.css" />
	</head>
	<body>
		<div class="grid-container">
			<!--  -->
			<header class="grid-x grid-padding-x grid-padding-y align-middle">
				<div class="large-4 medium-4 small-4 cell">
					<div>
						<a href="/" rel="home" class="h4"><img src="media/logo.png" alt="" class="logo" /> LivingLaboratory.org</a>
					</div>
				</div>
				<div class="large-8 medium-8 small-8 cell">
					<div>
						<ul class="dropdown menu align-right" data-dropdown-menu>
							<li><a href="species.html">Species</a></li>
							<li>
								<a href="reports.html">Reports</a>
								<ul class="menu align-right">
									<li><a href="possible-approaches.html">Creating a Living Laboratory</a></li>
									<li><a href="intertidal-zones.html">Intertidal Zones</a></li>
								</ul>
							</li>
							<li><a href="contact.html">Contact</a></li>
						</ul>
					</div>
				</div>
			</header>
			<!--  -->
			<div class="grid-x grid-padding-x">
				<div class="large-12 cell">
					<h1>api.inaturalist</h1>
				</div>
			</div>
			<!--  -->
			<div class="grid-x grid-padding-x">
				<div class="large-12 medium-12 small-12 cell">
					<div>
						<h2 class="wp-block-heading">Recent Observations</h2>
					</div>
				</div>
			</div>

			<div id="observations">
				<input class="search" placeholder="type anything" />

				<div class="grid-x grid-margin-x">
					<div class="cell auto">
						<!-- do ordering not as a fetch -->
						<select onchange="orderby(this.value)">
							<option disabled value="">Order by</option>
							<option value="species_guess">English Name a/z</option>
							<option value="id">(not searchable) Latin Name a/z</option>
							<option value="created_at">Date oldest/newest</option>
						</select>
					</div>
					<div class="cell auto">
						<!-- get project data? -->
						<select onchange="fillterby(this.value)">
							<option value="">All Species</option>
							<optgroup label="Kingdom">
								<option value="">Animalia</option>
								<option value="">Plantae</option>
								<option value="">Fungi</option>
								<option value="">Protista</option>
								<option value="">Archaea/Archaebacteria</option>
								<option value="">Bacteria/Eubacteria</option>
							</optgroup>
							<optgroup label="Family (not sure how to generate)">
								<option value="">abcd...</option>
								<option value="">abcd...</option>
								<option value="">abcd...</option>
							</optgroup>
						</select>
					</div>
					<div class="cell auto">
						<!-- get project data? -->
						<select onchange="fillterby(this.value)">
							<option value="">All Locations (???)</option>
							<optgroup label="Deadmans Head">
								<option value="">abcd...</option>
								<option value="">abcd...</option>
								<option value="">abcd...</option>
							</optgroup>
							<optgroup label="Another Site">
								<option value="">abcd...</option>
								<option value="">abcd...</option>
								<option value="">abcd...</option>
							</optgroup>
						</select>
					</div>
					<div class="cell auto">
						<!-- post api filter? -->
						<select onchange="fillterby(this.value)">
							<option value="">All Threat Levels</option>
							<option value="">Endangered</option>
							<option value="">Threatened</option>
							<option value="">Vulneratble</option>
							<option value="">Extinct</option>
						</select>
					</div>
					<div class="cell auto">
						<!-- not asked for -->
						<select onchange="fillterby(this.value)">
							<option value="">All Establishment Means</option>
							<option value="">Native</option>
							<option value="">Introduced</option>
						</select>
					</div>
				</div>
				<ul class="list"></ul>
			</div>
			<script src="https://cdnjs.cloudflare.com/ajax/libs/list.js/2.3.1/list.min.js"></script>

			<script>
				function orderby(v) {
					console.log(v);
					observationsList.sort("name", { order: "desc" }); // Sorts the list in abc-order based on names
				}
				function filterby(v) {
					console.log(v);
					observationsList.sort("name", { order: "desc" }); // Sorts the list in abc-order based on names
				}

				var options = {
					valueNames: ["name", "latin", "family", "location", "date", "captive", { data: ["id"] }, { name: "link", attr: "href" }, { name: "image", attr: "src" }],
					item: `<li data-id="#">
							<a href="uri" class="link name">Name</a>
							<span class="latin">Latin name</span>
							<span class="family">Family name</span>
							<span class="location">Location</span>
							<span class="date">Date</span>
							<span class="captive">captive</span>
							<img class="image" src="uri" />
							</li>`,
				};

				var observationsList = new List("observations", options);

				fetch("https://api.inaturalist.org/v1/observations?project_id=152030&per_page=3&order=desc&order_by=created_at")
					.then((response) => response.json())
					.then((json) => {
						const inaturalist_json = json;
						console.log(inaturalist_json);

						for (var result of inaturalist_json.results) {
							console.log(result);
							observationsList.add({
								name: result.taxon.preferred_common_name,
								latin: result.taxon.name,
								kingdom: result.taxon.name,
								family: result.taxon.name,
								// threat
								extinct: result.taxon.extinct,
								threatened: result.taxon.threatened,
								// establishment
								captive: result.captive,
								introduced: result.taxon.introduced,
								//
								link: result.uri,
								location: result.place_guess,
								date: result.resulterved_on_string,
								image: result.photos[0].url,
								id: result.id,
							});
						}
					});
			</script>
			<!--

















	 -->
			<!--  -->
			<footer class="grid-x grid-padding-x grid-padding-y align-middle" id="contact">
				<div class="large-4 medium-4 small-4 cell">
					<div>
						<a href="/" rel="home" class="h4"><img src="media/logo.png" alt="" class="logo" /> LivingLaboratory.org</a>
					</div>
				</div>
				<div class="large-8 medium-8 small-8 cell">
					<div>
						<ul class="menu align-right">
							<ul class="menu align-right">
								<li><a href="species.html">Species</a></li>
								<li><a href="reports.html">Reports</a></li>
								<li><a href="contact.html">Contact</a></li>
								<li><a href="legal.html">Legal Stuff</a></li>
							</ul>
						</ul>
					</div>
				</div>
			</footer>
			<!--  -->
		</div>

		<script src="js/vendor/jquery.js"></script>
		<script src="js/vendor/what-input.js"></script>
		<script src="js/vendor/foundation.js"></script>
		<script src="js/app.js"></script>

		<!--https://gtranslate.io/website-translator-widget-->
		<div class="gtranslate_wrapper"></div>
		<script>
			window.gtranslateSettings = {
				default_language: "en",
				native_language_names: true,
				detect_browser_language: true,
				languages: ["en", "fr"],
				wrapper_selector: ".gtranslate_wrapper",
				alt_flags: { en: "usa", fr: "quebec" },
			};
		</script>
		<script src="https://cdn.gtranslate.net/widgets/latest/float.js" defer></script>
	</body>
</html>
